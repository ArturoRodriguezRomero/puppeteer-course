"use strict";var auth={"currentPage":null,"pages":{"SignUp":1,"Login":2,"AddLogin":3,"Password":4},"getSsrc":function(t){var e=$('#login-form input[name="ssrc"]'),a=void 0;return e&&1===e.length&&(a=e.val()),a||(a=t),a},"init":function(t){auth.currentPage=t;var e=[],a=[],n=[],o=[],i=null,s=null,r=null,c=null,u=function(t,e){var a=t.closest(".js-auth-item");a.addClass("has-error"),a.find(".js-alert-icon").removeClass("d-none"),a.find(".js-error-message").removeClass("d-none").append(e)},p=function(t){var e=t.closest(".js-auth-item");e.removeClass("has-error"),e.find(".js-alert-icon").addClass("d-none"),e.find(".js-error-message").addClass("d-none").empty()};if($("#openid-buttons").on("click","[data-provider]",function(e){t===auth.pages.Login&&StackExchange.using("gps",function(){StackExchange.gps.track("login.start",{"tid":StackExchange.options.user.tid},!0)});var a=$(this).data("provider");if(a){var n=!1;t===auth.pages.SignUp&&(StackExchange.using("gps",function(){StackExchange.gps.track("signup.start",{"openid_provider":a,"location":auth.getSsrc("signup_page"),"tid":StackExchange.options.user.tid},!0)}),n=!0),auth.signin($(this),e,n)}}),t===auth.pages.SignUp){var l=$("#se-login-fields");$(l).on("keyup","input[name=password],input[name=display-name],input[name=email]",function(t){var e=$(t.target);if(!e.data("entered")){var a="signup."+e.attr("name").replace("display-","")+".entered";StackExchange.using("gps",function(){StackExchange.gps.track(a,{},!0)}),e.data("entered",!0),StackExchange.options.mustTrackSignupStartForResearchRecruitment&&!l.data("entered")&&($.ajax("/urr/signup-start"),l.data("entered",!0))}}),$("#se-login-fields").on("click","#submit-button",function(){StackExchange.using("gps",function(){StackExchange.gps.track("signup.se.click",{},!0)})}),$(".js-terms").on("click","a[name=privacy],a[name=tos]",function(t){var e=$(t.target),a="signup."+e.attr("name")+".click";StackExchange.using("gps",function(){StackExchange.gps.track(a,{},!0)})}),$(".js-redirects").on("click","a[name=login],a[name=talent]",function(t){var e=$(t.target),a="signup."+e.attr("name")+"_redirect";StackExchange.using("gps",function(){StackExchange.gps.track(a,{},!0)})})}var g=$('<p class="s-input-message fc-red-500"></p>').text("Mayúscula activadas"),f=$(".js-password"),d=!1;f.keypress(function(t){var e=String.fromCharCode(t.which),a=/[a-z]/i.test(e);if(a){var n=e==e.toUpperCase();d=n&&!t.shiftKey}var o=document.msCapsLockWarningOff===!1,i=o;d&&!i?f.after(g):g.remove()}),f.find("input").blur(function(){g.remove()});var h=!1,m=!1;$("#login-form input").blur(function(e){t===auth.pages.SignUp&&(""==$(e.target).val()||h||(StackExchange.gps.track("signup.start",{"openid_provider":"Stack Exchange","location":auth.getSsrc("signup_page"),"tid":StackExchange.options.user.tid},!0),h=!0)),t===auth.pages.Login&&(""==$(e.target).val()||m||(StackExchange.gps.track("login.start",{"tid":StackExchange.options.user.tid},!0),m=!0))}),$("#login-form input[type='text'], #login-form input[type='password'], #login-form input[type='email']").keypress(function(e){return 13===e.which?($("#submit-button").is(":hidden")||t===auth.pages.AddLogin?$("#login-form").submit():$("#login-form #submit-button").click(),e.preventDefault(),!1):void 0});var v=function(t,e){if(t.length>0){if(null!=e){for(var a=!0,n=0;n<t.length;n++)if(t[n].message==e.message){a=!1;break}t[0].changed=a}return t[0]}},k=function(t){null!=t&&t.changed&&u(t.attachTo,t.message)},b=function(){k(i),k(s),k(c),k(r)},x=function(){e=[],a=[],n=[],o=[],i=null,s=null,r=null,c=null,$(".js-auth-item").removeClass("has-error"),$(".js-alert-icon").addClass("d-none"),$(".js-error-message").addClass("d-none").empty()},y=function(t,e,a){for(var n="all"===e,o=0;o<t.length&&(t[o].id!=e&&!n||(t.splice(o,1),n));o++);a&&p(a)},w=StackExchange.Auth.addOrUpdateError,S=function(e){var n=$("input[name = 'password']"),o=0===$.trim(n.val()).length;if(o&&!e?w(a,{"id":"pw-empty","index":0,"attachTo":n,"message":"El campo de la contraseña no puede estar vacío."}):y(a,"pw-empty",n),t===auth.pages.SignUp||t===auth.pages.Password){StackExchange.Auth.passwordStrengthValidation(n,a,y);var i=$.trim(n.val()),s=$('input[name="password2"]');if(s.length){var r=$.trim(s.val());0===r.length?w(a,{"id":"pw-empty2","index":3,"attachTo":s,"message":"La confirmación de la contraseña no puede estar vacía."}):y(a,"pw-empty2",s),r.length>0&&i!==r?w(a,{"id":"pw-match","index":4,"attachTo":s,"message":"Las contraseñas no coinciden."}):y(a,"pw-match",s)}if(StackExchange.settings.accounts.currentPasswordRequiredForChangingStackIdPassword){var c=$('input[name="currentpassword"]');if(c.length){var u=$.trim(c.val());0===u.length?w(a,{"id":"curpw-empty","index":0,"attachTo":c,"message":'La "Contraseña actual" no puede estar vacía.'}):y(a,"curpw-empty",c)}}}},E=function(){var t=$("input[name='email']"),a=0===$.trim(t.val()).length;a?w(e,{"id":"em-empty","index":0,"attachTo":t,"message":"El campo de correo electrónico no puede estar vacío."}):y(e,"em-empty",t)},_=function(){var t=$("#no-captcha-here iframe").length>0,e=$(".js-catpcha-error-container");if(t){var a=grecaptcha.getResponse().length>0;a?y(o,"cp",e):w(o,{"id":"cp","index":0,"attachTo":e,"message":"CAPTCHA respuesta requerida."})}},q=function(){var t=$.trim($("input[name='email']").val()).toUpperCase(),e=$("input[name='display-name']"),a=$.trim(e.val()).toUpperCase();t===a&&""!=t?w(n,{"id":"nm","index":0,"attachTo":e,"message":"El nombre y la dirección de correo electrónico deben ser diferentes. Si no deseas introducir un nombre, déjalo en blanco.","faileType":"name_email_same"}):y(n,"nm",e)},T=function(){return S(),t===auth.pages.SignUp&&(q(),_()),t!=auth.pages.Password&&E(),i=v(e,i),s=v(a,s),r=v(n,r),c=v(o,c),null==i&&null==s&&null==r&&null==c},C=!0;$("#login-form #submit-button").click(function(a){var n={"isSignup":t===auth.pages.SignUp,"isLogin":t===auth.pages.Login,"isPassword":t===auth.pages.Password,"isAddLogin":t===auth.pages.AddLogin};return x(),$("#login-form input").each(function(t,e){var a=$(e).attr("name");a&&(a=a.replace(/(\W|_)/gi,""),n[a]=$(e).val())}),$.ajax({"url":"/users/login-or-signup/validation/track","data":n,"type":"POST","complete":function(){var a=T();return C&&($("#login-form input").blur(function(){if(T(),t===auth.pages.SignUp){var a=$("#login-form input[name='email']"),n=$.trim(a.val());y(e,"em-ajax"),$.ajax({"type":"POST","url":"/users/signup/email/validate","data":{"email":n,"fkey":StackExchange.options.user.fkey},"success":function(n){t!==auth.pages.AddLogin&&(n.IsValid?i=null:(w(e,{"id":"em-ajax","index":1,"attachTo":a,"message":n.ErrorMessage}),i=v(e,i)))},"complete":function(){b()}})}else b()}),C=!1),a?($("#login-form").submit(),void 0):(b(),void 0)}}),a.preventDefault(),!1}),$("#se-pw-reset").submit(function(t){x();var e=T();return e||(b(),t.preventDefault()),e})},"removeAllErrors":function(){},"signin":function(t,e,a){function n(t,e){var a="users_login";auth.currentPage===auth.pages.SignUp&&(a="signup_page",e||StackExchange.using("gps",function(){StackExchange.gps.track("signup.start",{"openid_provider":t,"location":auth.getSsrc(a),"tid":StackExchange.options.user.tid},!0)}),t&&StackExchange.using("gps",function(){StackExchange.gps.track("signup.openid.click",{"openid_provider":t,"location":a},!0)})),t&&StackExchange.using("gps",function(){StackExchange.gps.track("openid.click",{"openid_provider":t,"location":a},!0)})}function o(t){var e={"name":t.data("provider")};return t.data("oauthserver")&&(e.oauth_server=t.data("oauthserver")),t.data("oauthversion")&&(e.oauth_version=t.attr("data-oauthversion")),e}var i=t.data?o(t):t;if(i){if("stack_exchange"===i.name)return n("Stack Exchange",a),void 0;n(i.name.replace(/_/g," "),a),"2.0"===i.oauth_version&&this.setOAuthInfo(i.oauth_version,i.oauth_server),$("#login-form").submit()}},"setOAuthInfo":function(t,e){$("#oauth_version").val(t),$("#oauth_server").val(e)}};